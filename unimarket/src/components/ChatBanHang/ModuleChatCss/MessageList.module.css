/* ===== CHATBOX CONTAINER ===== */
.chatboxContainer {
  -webkit-locale: "vi";
  box-sizing: border-box;
  scrollbar-color: silver transparent;
  scrollbar-width: thin;
  font-family: 'Reddit Sans', sans-serif;
  font-size: 100%;
  --app-wrapper-height: 66px;
  overflow-y: hidden;

  /* === Sá»¬A á» ÄÃ‚Y === */
  margin: 0;           /* Bá» margin cÅ© (86px) */
  width: 100%;
  max-width: 100%;      /* Bá» max-width (1500px) */
  /* === Háº¾T Sá»¬A === */

  height: 100%;         /* Giá»¯ nguyÃªn, nÃ³ sáº½ láº¥y 100% cá»§a 100vh */
  
  /* âœ… Äá»”I MÃ€U: Ná»n container chÃ­nh */
  background: var(--theme-bg-primary);

  /* === Sá»¬A á» ÄÃ‚Y === */
  border-radius: 0;     /* Bá» border-radius (16px) */
  /* === Háº¾T Sá»¬A === */

  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  
  /* ThÃªm transition Ä‘á»ƒ Ä‘á»•i mÃ u mÆ°á»£t */
  transition: background-color 0.3s ease;
}

/* FIX BÆ¯á»šC 1: THÃŠM CLASS CHA Má»šI NÃ€Y */
.chatWindowWrapper {
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* NgÄƒn cháº·n báº¥t ká»³ trÃ n nÃ o khÃ´ng mong muá»‘n */
}

.chatboxMessages {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
  overflow-x: hidden;
  background: var(--theme-bg-secondary);
  /* ğŸ”¥ GIáº¢M PADDING NÃ€Y: Chá»‰nh xuá»‘ng 20px hoáº·c vá»«a Ä‘á»§ vá»›i chiá»u cao thanh input cá»§a báº¡n */
  padding-bottom: 15px; 
  
  scrollbar-width: thin;
  scrollbar-color: var(--theme-border-color) transparent;
  
  /* Giá»¯ nguyÃªn cÃ¡i nÃ y */
  overflow-anchor: none;
  position: relative;
}

/* Webkit Scrollbar */
.chatboxMessages::-webkit-scrollbar {
  width: 4px;
}

.chatboxMessages::-webkit-scrollbar-track {
  background: transparent;
}

.chatboxMessages::-webkit-scrollbar-thumb {
  /* âœ… Äá»”I MÃ€U: Thanh cuá»™n Chrome */
  background: var(--theme-border-color);
  border-radius: 3px;
}

.chatboxMessages::-webkit-scrollbar-thumb:hover {
  /* âœ… Äá»”I MÃ€U: Thanh cuá»™n khi hover */
  background: var(--theme-text-secondary);
}

/* Empty Chat State */
.chatboxEmptyChat {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  /* âœ… Äá»”I MÃ€U: Chá»¯ khi trá»‘ng */
  color: var(--theme-text-secondary);
  text-align: center;
}

.chatboxEmptyIcon {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 64px;
  width: 96px;
  height: 96px;
  margin: 140px auto 16px auto;
  border-radius: 50%;
  /* âœ… Äá»”I MÃ€U: Ná»n icon trá»‘ng (Cam nháº¡t) */
  background: rgba(255, 165, 0, 0.15); 
  /* âœ… Äá»”I MÃ€U: Icon trá»‘ng (Cam) */
  color: #ff9800;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  transition: transform 0.2s ease;
}

.emptyText {
  margin: 6px 0;
  font-size: 14px;
  font-family: "Inter", "Segoe UI", "Roboto", sans-serif;
  font-weight: 500;
  /* âœ… Äá»”I MÃ€U: Chá»¯ text trá»‘ng */
  color: var(--theme-text-secondary);
  letter-spacing: 0.2px;
  line-height: 1.6;
}

/* FIX BÆ¯á»šC 3: THAY Äá»”I HOÃ€N TOÃ€N Äá»ŠNH Vá»Š Cá»¦A .blockedNotice */
.blockedNotice {
  /* --- Giá»¯ nguyÃªn cÃ¡c thuá»™c tÃ­nh giao diá»‡n --- */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  /* Giá»¯ nguyÃªn mÃ u Ä‘á» gradient Ä‘á»ƒ cáº£nh bÃ¡o */
  background: linear-gradient(135deg, #ff4d4f, #e63946);
  color: white;
  padding: 12px 20px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 500;
  box-shadow: 0 4px 12px rgba(255, 77, 79, 0.3);
  animation: slideIn 0.3s ease;

  /* --- Thay Ä‘á»•i Ä‘á»‹nh vá»‹ --- */
  position: absolute; /* Äá»•i sang absolute */
  bottom: 20px;       /* Ghim cÃ¡ch Ä‘Ã¡y 20px */
  left: 20px;         /* Ghim cÃ¡ch trÃ¡i 20px */
  right: 20px;        /* Ghim cÃ¡ch pháº£i 20px */
  margin: 0;          /* Bá» margin cÅ© */
  z-index: 10;        /* Äáº£m báº£o nÃ³ ná»•i lÃªn trÃªn */
}

.blockedNotice svg {
  color: #ffebee;
  transform: scale(1.1);
}

.blockedNotice p {
  margin: 0;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive */
@media (min-width: 1700px) {
  .container {
    max-width: 1700px;
  }
}

@media (max-width: 1500px) {
  .container {
    position: relative;
    width: 100vw;
    max-width: none;
    left: 0;
    right: 0;
    margin: 0;
    border-radius: 0;
  }
}

@media (max-width: 768px) {
  .container {
    max-width: 100vw;
    border-radius: 0;
    margin: 0;
    height: 100vh;
  }
  
  /* FIX BÆ¯á»šC 4: Cáº­p nháº­t responsive cho .blockedNotice */
  .blockedNotice {
    left: 16px;
    right: 16px;
    bottom: 10px; /* Gáº§n Ä‘Ã¡y hÆ¡n 1 chÃºt trÃªn mobile */
    padding: 10px 16px;
    font-size: 13px;
  }
}

@media (max-width: 480px) {
  .container {
    max-width: 100vw;
    margin: 0;
    height: 100vh;
  }

  /* FIX BÆ¯á»šC 5: Cáº­p nháº­t responsive cho .blockedNotice */
  .blockedNotice {
    left: 12px;
    right: 12px;
    bottom: 10px;
    padding: 8px 12px;
    font-size: 12px;
  }
}
/* ===== CSS CHO LOADING SPINNER ===== */
.loadingMore {
  position: absolute;
  top: 10px;  /* CÃ¡ch Ä‘á»‰nh 10px */
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999; /* Äáº£m báº£o ná»•i lÃªn trÃªn tin nháº¯n */
  height: 40px; /* Chiá»u cao khu vá»±c loading */
  background: transparent; /* Ná»n trong suá»‘t hoáº·c má» nháº¹ náº¿u thÃ­ch */
  pointer-events: none; /* Äá»ƒ chuá»™t váº«n cuá»™n Ä‘Æ°á»£c khi Ä‘ang load */
}

.spinner {
  width: 24px;
  height: 24px;
  border: 3px solid rgba(0, 0, 0, 0.1);
  border-top-color: #3b82f6; /* MÃ u xanh dÆ°Æ¡ng */
  border-radius: 50%;
  animation: spin 0.8s linear infinite; /* Quay nhanh hÆ¡n chÃºt cho mÆ°á»£t */
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* ===== NEW LAYOUT STYLES ===== */
.chatPageWrapper {
  position: relative; /* Ngá»¯ cáº£nh cho modal */
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 100%;
  overflow: hidden; /* KhÃ´ng cuá»™n ngang */
}

/* Modal Loading Overlay */
.modalLoadingOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9998; /* Äáº£m báº£o nÃ³ hiá»‡n trÃªn cÃ¹ng */
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  /* âœ… Äá»”I MÃ€U: Ná»n loading overlay (bÃ¡n trong suá»‘t) */
  background-color: rgba(0, 0, 0, 0.3);
  opacity: 0;
  animation: fadeIn 0.2s ease forwards;
}

.modalLoadingSpinner {
  width: 50px;
  height: 50px;
  border: 5px solid #f3f3f3;
  border-top: 5px solid #3498db; /* MÃ u spinner */
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}